<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
    <head>
        
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />

        <title>Static variable inheritance in PHP &middot; Global Constant</title>
        <link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600' type='text/css'>
        <link rel="stylesheet" href="http://blog.scnay.com/css/main.min.css" />
        <link rel="alternate" href="" type="application/rss+xml" title="Global Constant" />
        <style type="text/css">
            .alignright {
                float: right;
            }
        </style>
    </head>
    <body class="li-body">

<header class="li-page-header">
    <div class="container">
        <div class="row">
            <div class="sixteen columns">
                <div class="li-brand li-left">
                <a href="http://blog.scnay.com">Global Constant</a>
                <br />Steve Nay&#39;s ramblings</div>
                <div class="li-menu li-right">
                    <span class="li-menu-icon" onclick="javascript:toggle('menu');">&#9776;</span>
                    <ul id="menu2" class="li-menu-items">
                        <li><a href="/archive">Archives</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="sixteen columns">
                <ul id="menu" class="li-menu-items li-menu-mobile">
                    <li><a href="/archive">Archives</a></li>
                </ul>
            </div>
        </div>
    </div>
</header>


    <div class="container">
        <div class="row">
            <div class="sixteen columns">
                <article class="li-article">
                    <header class="li-article-header">
                        <h1 class="li-article-title">Static variable inheritance in PHP</h1>
                        <time class="li-article-date">Monday 14 December 2009</time>
                    </header>
                    <section>
                        <p>In version 5.1 of PHP, classes can override static variables. But there are a few kinks.</p>

<p>To start off, here&rsquo;s the code I used to make this work:</p>

<p><strong>ParentClass.php</strong></p>

<pre><code>class ParentClass {
    static $something = &quot;I'm in the parent class&quot;;

    static function getSomething() {
        return self::$something;
    }
}
</code></pre>

<p><strong>Child1.php</strong></p>

<pre><code>class Child1 extends ParentClass {
}
</code></pre>

<p><strong>Child2.php</strong></p>

<pre><code>class Child2 extends ParentClass {
    static $something = &quot;I'm in the child class&quot;;
}
</code></pre>

<p><strong>Child3.php</strong></p>

<pre><code>class Child3 extends ParentClass {
    static $something = &quot;I'm in the child class&quot;;

    static function getSomething() {
        return self::$something;
    }
}
</code></pre>

<p><strong>test.php</strong></p>

<pre><code>require_once('ParentClass.php');
require_once('Child1.php');
require_once('Child2.php');

echo &quot;Parent class: &quot;;
echo ParentClass::$something;

echo &quot;&amp;lt;br /&amp;gt;Child1 class (no overriding): &quot;;
echo Child1::$something;

echo &quot;&amp;lt;br /&amp;gt;Child2 class (overrides static var): &quot;;
echo Child2::$something;

echo &quot;&amp;lt;br /&amp;gt;Child3 class (overrides static var): &quot;;
echo Child3::$something;

echo &quot;&amp;lt;hr /&amp;gt;&amp;lt;br /&amp;gt;Parent class: &quot;;
echo ParentClass::getSomething();

echo &quot;&amp;lt;br /&amp;gt;Using the method (Child1): &quot;;
echo Child1::getSomething();

echo &quot;&amp;lt;br /&amp;gt;Using the method (Child2): &quot;;
echo Child2::getSomething();

echo &quot;&amp;lt;br /&amp;gt;Using the method (Child3): &quot;;
echo Child3::getSomething();
</code></pre>

<p>Now here&rsquo;s the output when you run it:</p>

<pre><code>Parent class: I'm in the parent class
Child1 class (no overriding): I'm in the parent class
Child2 class (overrides static var): I'm in the child class
Child3 class (overrides static var): I'm in the child class
</code></pre>

<hr />

<pre><code>Parent class: I'm in the parent class
Using the method (Child1): I'm in the parent class
Using the method (Child2): I'm in the parent class
Using the method (Child3): I'm in the child class
</code></pre>

<p>Let&rsquo;s analyze what&rsquo;s going on here. The ParentClass implements a static variable called $something and assigns it a value. Child1 doesn&rsquo;t override that but simply inherits it. Child2 and Child3 both override it to give it a different value. When we retrieve the value of that static variable directly from each class, we can see that it worked.</p>

<p>The tricky behavior is in the method. The ParentClass implements the static method that outputs $something. We call that method respectively from each class. What you&rsquo;d expect is that it would output the value of the static variable as far down the inheritance line as the class from which it was called. But from the output it&rsquo;s apparent that <strong>the value of self::$something depends only on the class where the method was actually implemented, not the class from which it was called</strong>.</p>

                    </section>
                </article>
            </div>
        </div>
        <div class="row li-pagination">
            <div class="eight columns">
                <div class="li-pagination-previous">
                    
                        Later article<br />
                        <a href="http://blog.scnay.com/2009/12/26/smart-gets-things-done-ideas-for-the-programmer"> Smart &amp; Gets Things Done: Ideas for the programmer</a>
                    
                </div>
            </div>
            <div class="eight columns">
                <div class="li-pagination-next">
                    
                        Older article<br />
                        <a href="http://blog.scnay.com/2009/12/08/foreign-keys-in-mysql-innodb-and-myisam"> Foreign keys in MySQL: InnoDB and MyISAM</a>
                    
                </div>
            </div>
        </div>
    </div>

<footer class="li-page-footer">
    <div class="container">
        <div class="row">
            <div class="sixteen columns">
                <div class="li-page-footer-legal">
                    Licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC Attribution-ShareAlike 4.0 International</a>
                </div>
                <div class="li-page-footer-theme">
                    <span class="">Powered by <a href="http://hugo.spf13.com/">hugo</a>. Theme based on <a href="http://github.com/eliasson/liquorice/">liquorice</a>.</span>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script type="text/javascript">
    <!--
    function toggle(id) {
        var e = document.getElementById(id);
        e.style.display == 'block' ? e.style.display = 'none' : e.style.display = 'block';
    }
    
    </script>
    </body>
</html>

